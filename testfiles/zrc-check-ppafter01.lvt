\documentclass{article}

\input{regression-test}

\usepackage{zref-check}

\begin{document}

\START

\section{Section 1}

\zrcheck{sec:section-2}[pagesafter]{this check should pass}

\zrcheck{txt:target-2}[pagesafter]{this check should pass}

\OMIT
\clearpage{}
\TIMO

\zrcheck{sec:section-2}[pagesafter]{this check should pass}

\zrcheck{txt:target-2}[pagesafter]{this check should pass}

\OMIT
\clearpage{}
\TIMO

\zrcheck{sec:section-2}[pagesafter]{this check should pass}

\zrcheck{txt:target-2}[pagesafter]{this check should pass}

\OMIT
\clearpage{}
\TIMO

\zrcheck{sec:section-2}[pagesafter]{this check should pass}

\zrcheck{txt:target-2}[pagesafter]{this check should pass}

\OMIT
\clearpage{}
\TIMO

\section{Section 2}
\zlabel{sec:section-2}

\zrctarget{txt:target-2}{Lorem ipsum}

\zrcheck{sec:section-2}[pagesafter]{this check should fail}

\zrcheck{txt:target-2}[pagesafter]{this check should fail}

\OMIT

\end{document}
