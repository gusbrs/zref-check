\documentclass{book}

\input{regression-test}

\usepackage{zref-check}

\begin{document}

\START

\zrctarget{txt:target-0}{Lorem ipsum}

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should fail}

\zrcheck{cha:chapter-2}[prevchap]{this check should fail}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT
\chapter{Chapter 1}
\zlabel{cha:chapter-1}
\TIMO

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should fail}

\zrcheck{cha:chapter-2}[prevchap]{this check should fail}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT
\clearpage{}
\TIMO

\section{Section 1.1}

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should fail}

\zrcheck{cha:chapter-2}[prevchap]{this check should fail}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT
\chapter{Chapter 2}
\zlabel{cha:chapter-2}
\TIMO

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should pass}

\zrcheck{cha:chapter-2}[prevchap]{this check should fail}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT
\clearpage{}
\TIMO

\section{Section 2.1}

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should pass}

\zrcheck{cha:chapter-2}[prevchap]{this check should fail}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT
\chapter{Chapter 3}
\zlabel{cha:chapter-3}
\TIMO

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should fail}

\zrcheck{cha:chapter-2}[prevchap]{this check should pass}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT
\clearpage{}
\TIMO

\section{Section 3.1}

\zrcheck{txt:target-0}[prevchap]{this check should fail}

\zrcheck{cha:chapter-1}[prevchap]{this check should fail}

\zrcheck{cha:chapter-2}[prevchap]{this check should pass}

\zrcheck{cha:chapter-3}[prevchap]{this check should fail}

\OMIT

\end{document}
