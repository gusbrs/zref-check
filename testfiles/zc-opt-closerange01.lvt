\documentclass{article}

\input{regression-test}

\RequirePackage[enable-debug]{expl3}

\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation }
\ExplSyntaxOff

\usepackage{zref-check}
\zrefchecksetup{closerange=3}

\begin{document}

\START

\zctarget{txt:target-01}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-02}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-03}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-04}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-05}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-06}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-07}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-08}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-09}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-10}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-11}{Lorem ipsum}

\zcheck[close]{txt:target-01}{this check should fail}
\zcheck[far]{txt:target-01}{this check should pass}

\zcheck[close]{txt:target-02}{this check should fail}
\zcheck[far]{txt:target-02}{this check should pass}

\zcheck[close]{txt:target-03}{this check should fail}
\zcheck[far]{txt:target-03}{this check should pass}

\zcheck[close]{txt:target-04}{this check should fail}
\zcheck[far]{txt:target-04}{this check should pass}

\zcheck[close]{txt:target-05}{this check should fail}
\zcheck[far]{txt:target-05}{this check should pass}

\zcheck[close]{txt:target-06}{this check should fail}
\zcheck[far]{txt:target-06}{this check should pass}

\zcheck[close]{txt:target-07}{this check should fail}
\zcheck[far]{txt:target-07}{this check should pass}

\zcheck[close]{txt:target-08}{this check should pass}
\zcheck[far]{txt:target-08}{this check should fail}

\zcheck[close]{txt:target-09}{this check should pass}
\zcheck[far]{txt:target-09}{this check should fail}

\zcheck[close]{txt:target-10}{this check should pass}
\zcheck[far]{txt:target-10}{this check should fail}

\zcheck[close]{txt:target-11}{this check should pass}
\zcheck[far]{txt:target-11}{this check should fail}

\zcheck[close]{txt:target-12}{this check should pass}
\zcheck[far]{txt:target-12}{this check should fail}

\zcheck[close]{txt:target-13}{this check should pass}
\zcheck[far]{txt:target-13}{this check should fail}

\zcheck[close]{txt:target-14}{this check should pass}
\zcheck[far]{txt:target-14}{this check should fail}

\zcheck[close]{txt:target-15}{this check should fail}
\zcheck[far]{txt:target-15}{this check should pass}

\zcheck[close]{txt:target-16}{this check should fail}
\zcheck[far]{txt:target-16}{this check should pass}

\zcheck[close]{txt:target-17}{this check should fail}
\zcheck[far]{txt:target-17}{this check should pass}

\zcheck[close]{txt:target-18}{this check should fail}
\zcheck[far]{txt:target-18}{this check should pass}

\zcheck[close]{txt:target-19}{this check should fail}
\zcheck[far]{txt:target-19}{this check should pass}

\zcheck[close]{txt:target-20}{this check should fail}
\zcheck[far]{txt:target-20}{this check should pass}

\zcheck[close]{txt:target-21}{this check should fail}
\zcheck[far]{txt:target-21}{this check should pass}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-12}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-13}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-14}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-15}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-16}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-17}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-18}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-19}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-20}{Lorem ipsum}

\OMIT
\clearpage{}
\TIMO

\zctarget{txt:target-21}{Lorem ipsum}

\OMIT

\end{document}
